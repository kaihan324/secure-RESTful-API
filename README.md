
 🌐 API امن RESTful با رمزنگاری (FastAPI + AES)

این پروژه یک API امن RESTful را با استفاده از FastAPI پیاده‌سازی می‌کند که شامل ذخیره‌سازی رمزگذاری شده داده‌های حساس کاربران و مدیریت کلید داخلی (KMS) است.

 ✨ ویژگی‌ها

- ثبت‌نام کاربران با استفاده از هش کردن پسورد (SHA-512 + salt + pepper)
- ورود به سیستم با احراز هویت مبتنی بر JWT
- رمزنگاری AES داده‌های حساس کاربران با کلیدهای رمزنگاری مخصوص هر کاربر
- سیستم مدیریت کلید داخلی (KMS) برای تولید و ذخیره امن کلیدهای رمزنگاری
- استفاده از SQLite به عنوان پایگاه داده سبک محلی
- مستندات کامل API که به صورت خودکار با Swagger در آدرس `/docs` تولید می‌شود

 ⚙️ راه‌اندازی

1. مخزن پروژه را کلون کرده و وارد دایرکتوری پروژه شوید:
   ```bash
   git clone https://your-repo-url.git
   cd secure_api_project
   ```

2. اسکریپت راه‌اندازی را اجرا کنید:
   ```bash
   ./setup.sh
   ```

   این اسکریپت موارد زیر را انجام می‌دهد:
   - ایجاد محیط مجازی پایتون (`venv`)
   - نصب تمام وابستگی‌های موجود در فایل `requirements.txt`

3. محیط مجازی را فعال کنید:
   ```bash
   source venv/bin/activate
   ```

4. برنامه FastAPI را اجرا کنید:
   ```bash
   python -m uvicorn main:app --reload --host 0.0.0.0 --port 8001
   ```

5. مستندات API را در مرورگر خود باز کنید:
   [http://localhost:8001/docs](http://localhost:8001/docs)

 🔐 متغیرهای محیطی (اختیاری اما توصیه‌شده)

می‌توانید متغیرهای محیطی را برای مدیریت امن کلیدها تنظیم کنید:

```bash
export SECRET_KEY="your_jwt_secret_key"
export PEPPER="your_global_pepper_value"
export MASTER_KEY="32_byte_master_key_for_encryption"
```

> ⚠️ مطمئن شوید که `MASTER_KEY` دقیقاً 32 بایت برای رمزنگاری AES-256 است.

 
 📝 گزارش فنی

 1. معماری کلی سامانه

پروژه شامل یک API امن RESTful است که از FastAPI برای توسعه سریع و آسان استفاده می‌کند. این API از JWT برای احراز هویت و از AES برای رمزنگاری داده‌های حساس استفاده می‌کند. معماری به گونه‌ای طراحی شده است که در آن هر کاربر کلید رمزنگاری منحصر به فرد خود را دارد که توسط یک سیستم مدیریت کلید (KMS) امن تولید و ذخیره می‌شود. برای ذخیره‌سازی داده‌ها، از پایگاه داده SQLite به عنوان یک پایگاه داده محلی سبک استفاده می‌شود.

 2. الگوریتم‌های رمزنگاری و هش استفاده‌شده

- **هش پسوردها**: برای هش کردن پسوردها از SHA-512 به همراه salt و pepper استفاده می‌شود. این کار به منظور افزایش امنیت پسوردها انجام می‌شود.
- **رمزنگاری داده‌ها**: برای رمزنگاری داده‌های حساس از AES با کلیدهای 256 بیتی استفاده می‌شود. هر کاربر یک کلید منحصر به فرد دارد که توسط سیستم مدیریت کلید تولید می‌شود.

 3. ساختار پایگاه داده

پایگاه داده پروژه از SQLite استفاده می‌کند که برای ذخیره‌سازی داده‌های کاربر و اطلاعات رمزنگاری شده به کار می‌رود. مدل‌های پایگاه داده به صورت SQLAlchemy طراحی شده‌اند و شامل جداول برای کاربران و داده‌های حساس است.

 4. روش مدیریت کلید

سیستم مدیریت کلید (KMS) مسئول تولید، ذخیره‌سازی و مدیریت امن کلیدهای رمزنگاری است. این کلیدها به صورت منحصر به فرد برای هر کاربر ایجاد می‌شوند و به صورت ایمن در سیستم نگهداری می‌شوند. در این پروژه، کلیدها به صورت محلی و در یک فایل امن ذخیره می‌شوند.

 5. دلایل انتخاب ابزارها و روش‌ها

- **FastAPI**: این فریم‌ورک برای توسعه API‌های سریع و ایمن انتخاب شده است. FastAPI همچنین از ویژگی‌هایی مانند Swagger برای مستندسازی خودکار API پشتیبانی می‌کند.
- **AES**: این الگوریتم به دلیل امنیت بالای آن و قابلیت‌های انعطاف‌پذیر برای رمزنگاری داده‌ها انتخاب شده است.
- **SQLite**: به دلیل سادگی و سبک بودن، SQLite برای استفاده در محیط‌های توسعه و تست مناسب است. برای پروژه‌های با مقیاس بزرگ‌تر، می‌توان از پایگاه داده‌های دیگر مانند PostgreSQL یا MySQL استفاده کرد.
- **JWT**: برای احراز هویت کاربران و ایجاد توکن‌های امن، از JWT استفاده می‌شود که امکان مدیریت جلسات را بدون ذخیره‌سازی داده در سرور فراهم می‌آورد.
